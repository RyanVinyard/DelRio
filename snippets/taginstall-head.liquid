<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TNNWZM9');</script>
<!-- End Google Tag Manager -->
<!-- TAGinstall -->
<script>window.addEventListener('load',function(){
(function (w, d) {
var n=w[d]=w[d]||[],u=function(d){n.push(d)};{%- capture get_page -%}{%- if template.name == "index" -%}'Home Page'{% elsif template.name == "collection" -%}'Collection Page'{%- elsif template.name == "product" -%}'Product Page'{%- elsif template.name == "checkout" -%}'Checkout Page'{%- elsif template.name == "search" -%}{%- if search.performed -%}'Search Results'{%- else -%}'Search Page'{%- endif -%}{%- elsif template.name == "account" -%}'Account Page'{%- elsif template.name == "cart" -%}'Cart Page'{%- else -%}'Other Page'{%- endif -%}{%- endcapture -%}var pageType = {{get_page | stip_newlines}};var searchPerformed = {{ search.performed | default: false }};{%- capture products_json -%}{%- for product in collections.all.products -%}{"title":"{{product.title | replace: '"', ''}}","id":{{product.id}},"handle":"{{product.handle}}","price":{{product.price}},"image":"{{product.featured_image | img_url: "medium"}}","vendor":"{{product.vendor | replace: '"', ''}}",{% capture variants_json %}{% for variant in product.variants %}{"id": {{variant.id}},"title": "{{variant.title | replace: '"', ''}}","sku": "{{variant.sku | default: ''}}","price": {{product.price}}}{% if forloop.last == false %},{% endif%}{% endfor %}{% endcapture %}"variants": [{{- variants_json | strip_newlines -}}]}{% if forloop.last == false %},{% endif%}{%- endfor -%}{%- endcapture -%}{% if template.name != 'login' and template.name != 'checkout' %}var allProducts = [{{- products_json | strip_newlines -}}];{%- else -%}var allProducts = [];{% endif %}var shopCurrency = '{{ shop.currency }}';var collectionTitle = '{{collection.title | default: "" }}';{% if collection %}var collection = {{ collection | json }};{% endif %}u({event:pageType.replace(" ","")+"View",pageType:pageType});{% if customer %}var customer = {customerType: 'loggedIn',customerId: {{customer.id}},customerFirstName: '{{customer.first_name | sha256}}',customerLastName: '{{customer.last_name | sha256}}',customerEmail: '{{customer.email | sha256}}',hashedCustomerEmail: '{{customer.email | sha256}}',customerOrdersCount: {{customer.orders_count}},customerTotalSpent: {{customer.total_spent | divided_by: 100.0}}};{% else %}var customer = {customerType: 'guest'};{% endif %}u(customer);var e=function(e,i,a,n){return e?e.map(function(e,t){var r=e.variants[0];return{name:e.title,id:r&&r.sku||"",price:e.price/100,brand:e.vendor,image:e.image,category:i||"All Products",productId:e.id,variant:r&&r.title&&r.title.replace("'","")||"",variantId:r&&r.id||"",shopifyId:"shopify_"+e.id+"_"+(r&&r.id||""),list:a?"Search Results":n,handle:e.handle}}):[]},t=function(a){var e=Array.prototype.slice.call(document.querySelectorAll('a[href*="/products/"]')).filter(function(e){return!e.matches('a[href*="facebook.com"]')&&!e.matches('a[href*="twitter.com"]')&&!e.matches('a[href*="pinterest.com"]')});return a.length?e.slice(0,30).reduce(function(e,t,r){var t=t.href.split("/"),i=t[t.length-1].split("?")[0],t=a.find(function(e){return e.handle===i});return t&&(t.position=r+1,e.push(t)),e},[]):[]},r=e(allProducts,collectionTitle,searchPerformed,pageType),i=t(r);var c=function(e){var t;r&&0!==r.length&&(e=(e.target.matches('a[href*="/products/"]')?e.target:e.target.closest('a[href*="/products/"]')).href.split("/"),t=e[e.length-1].split("?")[0],(e=r.find(function(e){return e.handle===t}))&&(delete e.list,delete e.handle),u({event:"productClick",ecommerce:{currencyCode:shopCurrency,click:{actionField:{list:collectionTitle||pageType},products:[e]}}}))};Array.prototype.slice.call(document.querySelectorAll('a[href*="/products/"]')).forEach(function(e){e.addEventListener("click",c)});{% if template.name == 'product' %}var product = {{ product | json }};var a=function(e){var t=[];if(!(t=void 0!==e?e.querySelectorAll('[name="id"]'):document.querySelectorAll('form[action^="/cart/add"] select[name="id"]')).length)return product.variants[0];var r=t[0].value;return(/^[0-9]+$/.test(r)?product.variants.filter(function(e){return e.id==r}):product.variants)[0]},o=function(e,t){u({variantCompareAtPrice:t.compare_at_price/100,variantPrice:t.price/100,variantInventoryQuantity:t.inventory_quantity,shopifyProductId:"shopify_"+e.id+"_"+(t.id||"")})},d=function(e,t,r){u({event:"productDetailView",ecommerce:{currencyCode:shopCurrency,detail:{products:[{name:e.title.replace("'",""),id:t&&t.sku||"",productId:e.id,variantId:t&&t.id||"",shopifyId:"shopify_"+e.id+"_"+(t&&t.id||""),price:(t&&t.price||e.price)/100,image:'{{product.featured_image | img_url: "medium"}}',variantPrice:t&&t.price/100,variantCompareAtPrice:t&&t.compare_at_price/100,brand:e.vendor.replace("'",""),variant:t&&t.title&&t.title.replace("'","")||"",category:r}]}}})},l=a();l&&o(product,l),d(product,l,collectionTitle);var p=function(e){var t=a();t&&o(product,t),d(product,t,collectionTitle)};document.querySelectorAll('form[action^="/cart/add"] .single-option-selector').forEach(function(e){e.addEventListener("change",p)});var m=function(e){e=a(e);u({event:"addToCart",ecommerce:{currencyCode:ShopifyAnalytics.meta.currency,add:{products:[{name:product.title.replace("'",""),id:e&&e.sku||"",productId:product.id,variantId:e&&e.id||"",shopifyId:"shopify_"+product.id+"_"+(e&&e.id||""),price:(e&&e.price)/100||0,brand:product.vendor.replace("'",""),image:'{{product.featured_image | img_url: "medium"}}',variant:e&&e.title&&e.title.replace("'","")||"",quantity:document.getElementById("Quantity")?Number(document.getElementById("Quantity").value):1,category:collectionTitle}]}}})};document.querySelectorAll("form[action^='/cart/add']").forEach(function(t){var r=!1;t.querySelectorAll('[name="add"]').forEach(function(e){e.addEventListener("click",function(){return m(t)}),r=!0}),r||t.addEventListener("submit",function(){return m(t)})});{% elsif template.name == 'collection' %}u({event:"collectionView",ecommerce:{currencyCode:shopCurrency,actionField:{list:collectionTitle||pageType},impressions:i}});{% elsif template.name == 'search' and search.performed %}var sQuery = '{{search.terms}}';u({event:"searchResults",query:sQuery,ecommerce:{currencyCode:shopCurrency,actionField:{list:collectionTitle||pageType},impressions:i}});{% elsif template.name == 'cart' %}var cart = {{ cart | json }};var s,f,v=cart.items.map(function(t,e){return{position:e+1,id:t.sku,productId:t.product_id,variantId:t.variant_id,shopifyId:"shopify_"+t.product_id+"_"+t.variant_id,name:t.product_title.replace("'",""),quantity:t.quantity,price:t.discounted_price/100,brand:t.vendor.replace("'",""),variant:t.variant_title||"Default Variant"}});cart.items.length&&(s=cart.items.map(function(t){return t.sku}),f=cart.items.map(function(t){return"shopify_"+t.product_id+"_"+t.variant_id}),u({cartItemsCount:cart.items.length,cartItemsSKUs:s,shopifyCartItemSKUs:f})),u({cartTotal:cart.total_price/100,ecommerce:{currencyCode:shopCurrency,actionField:{list:"Shopping Cart"},impressions:v}});var h=function(t,e){var r=v[e];v=(v=v.filter(function(t){return t.position!==e+1})).map(function(t,e){return t.position=e+1,t}),u({event:"removeFromCart",ecommerce:{remove:{products:[r]}}})},_=function(){document.querySelectorAll('a[href^="/cart/change"]').forEach(function(t,e){t.hasAttribute("attached")||(t.addEventListener("click",function(t){h(t,e)}),t.setAttribute("attached",!0))})};_(),document.addEventListener&&document.addEventListener("DOMNodeInserted",_,!1);{% endif %}
})(window, 'dataLayer');
}, false);</script>
<!-- TAGinstall END -->